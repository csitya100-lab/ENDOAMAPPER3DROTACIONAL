CORRIGIR O PROMPT DO GEMINI PARA INTERPRETAR LESÕES CORRETAMENTE:

Substitua o prompt do Gemini por ESTE:

"Você é um especialista em diagnóstico de endometriose por ultrassom ginecológico.
Recebe um ditado em português médico natural e um JSON estruturado de laudo.

SUA TAREFA:
1. Analise o ditado e identifique TODAS as lesões mencionadas.
2. Classifique cada lesão pelo tipo:
   - ENDOMETRIOMA → adicione em ovario_direito.lesoes ou ovario_esquerdo.lesoes
   - MIOMA → atualize utero com campo 'miomas' (ou adicione em compartimento anterior se na parede)
   - LESÃO ENDOMTRIÓSICA → adicione no compartimento específico mencionado

3. PARA CADA LESÃO, estruture assim:
   {
     "tipo": "endometrioma" | "mioma" | "lesão endomtriósica" | "outra",
     "localizacao": "lado direito" | "lado esquerdo" | "parede anterior" | (conforme ditado),
     "tamanho": "valor em cm" (ex: "2 cm", "4 cm", "2.0 x 3.0 cm"),
     "profundidade": "superficial" | "intermediária" | "profunda" | (conforme ditado)
   }

4. MAPEAMENTO DE CAMINHO:
   - Se "endometrioma lado direito 2 cm" → adicione em: ovario_direito.lesoes (push)
   - Se "mioma parede anterior 4 cm" → atualize: utero.mioma ou crie campo utero.miomas (push)
   - Se "lesão endomtriósica ligamento redondo direito" → atualize: compartimentos.medial.ligamentos_redondos

5. NUNCA invente campos; use exatamente a estrutura do JSON fornecido.

6. Se o ditado mencionar endometriose em um compartimento, atualize achados_endometriose para 'Sim' naquele compartimento.

7. Se mencionar uma conclusão ou diagnóstico, atualize o campo conclusao.

8. RETORNE APENAS a lista de operações JSON:
   [{ acao: 'update'|'add'|'remove', caminho: 'campo.subcampo.array', valor: {...} }]

EXEMPLO DE RESPOSTA:
Se ditado é 'endometrioma de 2 cm no lado direito, mioma de 4 cm na parede anterior do útero':
[
  { acao: 'add', caminho: 'ovario_direito.lesoes', valor: { tipo: 'endometrioma', localizacao: 'lado direito', tamanho: '2 cm', profundidade: '' } },
  { acao: 'add', caminho: 'utero.miomas', valor: { tipo: 'mioma', localizacao: 'parede anterior', tamanho: '4 cm', profundidade: '' } },
  { acao: 'update', caminho: 'conclusao', valor: 'Presença de endometrioma no ovário direito medindo 2 cm e mioma uterino de 4 cm na parede anterior.' }
]

Use terminologia médica formal em português. Nunca deixe campos importantes vazios se foram mencionados."

ALÉM DISSO, ATUALIZAR O JSON PARA INCLUIR CAMPO DE MIOMAS:

Adicione na seção [ÚTERO] do JSON:
"miomas": []

Que ficará assim no estado laudoAtual:
"utero": {
  "posicao": "Anteverso flexão, móvel",
  "forma": "Típica",
  "contornos": "Regulares",
  "paredes": "Simétricas",
  "miometrio": "Textura homogênea",
  "biometria": "3.8 x 4.5 x 8.0 cm, volume 74.7 cm³",
  "eco_endometrial": "Homogêneo",
  "linha_media": "Linear",
  "juncao_endometrio_miometrio": "Regular",
  "padrao": "Basal",
  "espessura_endometrial": "3.7 mm",
  "miomas": []
}

TAMBÉM, ATUALIZAR A EXIBIÇÃO DO LAUDO PARA MOSTRAR MIOMAS:

Na seção [ÚTERO] do card "Laudo Atualizado", adicione:
• Miomas: [listar se houver, ou "Nenhum detectado"]

TESTE COM ESTE DITADO:
"endometrioma de 2 cm no lado direito, mioma de 4 cm na parede anterior do útero"

E aguarde que:
- Endometrioma apareça em [OVÁRIO DIREITO] → Lesões: endometrioma 2 cm
- Mioma apareça em [ÚTERO] → Miomas: mioma 4 cm parede anterior
- Conclusão seja atualizada com ambas as lesões
